<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>¿A dónde vamos?</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="search-container">
    <img src="assets/images/fondo.jpg" />
    <form (ngSubmit)="submitForm()">
      <div class="search-fields">
        <ion-item>
          <ion-label position="stacked">Buscar Viaje</ion-label>
          <ion-searchbar 
            [(ngModel)]="viaje" 
            name="origen" 
            placeholder="Buscar viaje">
          </ion-searchbar>
        </ion-item>
      </div>
      <ion-item class="button-container">
        <ion-button expand="full" color="red" class="search-button" type="submit">
          Buscar
        </ion-button>
      </ion-item>
    </form>

    <div *ngIf="loading" class="loading-container">
      <ion-spinner></ion-spinner>
      <p>Cargando viajes...</p>
    </div>

    <div class="trips-list" *ngIf="!loading && filteredTrips.length > 0">
      <ion-label position="stacked" class="trips-title">Viajes encontrados</ion-label>
      <ion-list>
        <ion-item *ngFor="let trip of filteredTrips" (click)="selectTrip(trip)">
          <ion-label>
            <h2>{{ trip.origin }} → {{ trip.destination }}</h2>
            <p>Fecha: {{ trip.departure_time | date: 'shortDate' }}</p>
            <p>Tipo: {{ trip.type }}</p>
            <p>Precio: {{ trip.price | currency }}</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </div>

    <div *ngIf="!loading && filteredTrips.length === 0" class="no-results">
      <p>No se encontraron viajes.</p>
    </div>
  </div>
</ion-content>
